# 文件夹筛选与管理逻辑实施计划 (Data Partition Retrieval Protocol)

用户已确认执行，我们将按照以下步骤实施：

## 1. 状态管理 (State Management)
- 在 `NotesPage` 组件中引入 `selectedFolderId` 状态。
- 类型：`number | null` (null 代表显示全部)。
- 默认值：`null`。

## 2. 筛选逻辑实现 (Filtering Logic)
更新 `filteredNotes` 的计算逻辑：
- **逻辑**：`笔记.folderId === selectedFolderId` (当 `selectedFolderId` 不为 null 时)。
- **叠加**：此条件将与现有的搜索词过滤 (`searchTerm`) 叠加生效。

## 3. UI 交互升级 (UI/UX Upgrade)
改造文件夹列表区域 (Folder Chips)：
- **新增 "ALL" 选项**：在列表开头添加 "全部/Global" 选项，用于重置筛选。
- **点击交互**：
  - 点击未选中的 Chip -> 筛选该文件夹。
  - 点击已选中的 Chip -> 取消筛选 (重置为 null)。
- **视觉反馈**：
  - **选中态**：`border-cyber-cyan text-white bg-cyber-cyan/10` (高亮)。
  - **普通态**：`border-gray-800 text-gray-400` (暗淡)。

## 4. 新建笔记联动 (Creation Workflow)
优化 `handleCreateNew`：
- 若当前已选中文件夹 (如 ID=2)，新建的笔记将自动归属于 ID=2 的文件夹。
- 若处于 "ALL" 模式，新建笔记归属于默认文件夹 (ID=1)。

我们将立即开始修改 `packages/web/src/pages/NotesPage.tsx`。