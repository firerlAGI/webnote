# Project Brief - WebNote

## 项目概述

**项目名称**: WebNote - 极简网页笔记 + 轻量化日复盘

**项目类型**: Web 应用（Monorepo 架构）

**核心价值**: 极简设计、轻量化操作、低成本开发

**项目目标**: 打造一款专注于核心功能的笔记和复盘工具，避免过度设计

## 核心需求

### 功能需求

1. **极简网页笔记**
   - 基础笔记操作（创建、编辑、删除、查看）
   - 笔记分类管理（文件夹系统）
   - 笔记搜索功能
   - Markdown 编辑器支持

2. **轻量化日复盘**
   - 每日复盘记录
   - 复盘数据统计（情绪趋势、完成率分析）
   - 复盘历史查询

3. **通用功能**
   - 用户认证系统
   - 数据备份
   - 多设备同步

### 非功能需求

- **性能**: 响应快速，加载时间 < 2s
- **兼容性**: 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- **可扩展性**: 支持未来功能扩展（浏览器插件等）
- **安全性**: 用户数据加密传输，JWT 认证
- **可维护性**: 代码清晰，模块化设计

## 项目范围

### 包含功能

- ✅ 用户注册、登录、认证
- ✅ 笔记 CRUD 操作
- ✅ 日复盘 CRUD 操作
- ✅ Markdown 编辑器（实时预览、代码高亮、图片上传）
- ✅ 数据同步（WebSocket + HTTP 降级）
- ✅ 数据备份（本地 + 阿里云 OSS）
- ✅ 前端缓存（三级缓存架构）

### 不包含功能

- ❌ 复杂的协作功能
- ❌ AI 辅助功能
- ❌ 多媒体编辑（视频、音频）
- ❌ 复杂的权限管理
- ❌ 社交分享功能

## 项目架构

### Monorepo 结构

```
webnote/
├── packages/
│   ├── backend/          # 后端服务 (Fastify + PostgreSQL + Prisma)
│   ├── web/             # 前端应用 (React + TypeScript + TailwindCSS + Vite)
│   ├── shared/          # 共享类型和工具
│   ├── ui-components/   # 共享 UI 组件
│   ├── browser-extension/ # 浏览器插件（规划中）
│   └── config/          # 共享配置
├── memory-bank/         # 记忆库
├── scripts/            # 部署脚本
├── project-docs/       # 项目文档
└── package.json        # 根项目配置
```

### 技术栈

**前端**:
- React 18 + TypeScript
- TailwindCSS + Vite
- React Router
- react-markdown 编辑器

**后端**:
- Node.js + Fastify
- PostgreSQL + Prisma ORM
- WebSocket 实时同步
- JWT 认证

**工具链**:
- pnpm 包管理器
- Turborepo Monorepo 管理
- ESLint + Prettier 代码规范
- Vitest 单元测试

## 里程碑

### 已完成

- ✅ T0: 项目初始化与架构搭建 (100%)
- ✅ T1: 后端核心服务开发 (100%)
- ✅ 用户认证系统 (2026-01-10)
- ✅ 基础笔记功能 (2026-01-10)
- ✅ 轻量化日复盘 (2026-01-10)
- ✅ 搜索功能 (2026-01-10)

### 进行中

- 🚧 T2: 前端网页应用核心功能 (92%)
- 🚧 T3: 数据同步与存储优化 (90%)
- 🚧 T5: 测试与验证 (10%)

### 待开始

- ⏳ T4: 用户体验打磨 (0%)
- ⏳ T6: 部署与监控 (0%)

## 项目目标

### 短期目标（1-2周）

- 完成前端响应式布局和界面优化
- 完成数据同步功能的测试和优化
- 完成数据库性能优化

### 中期目标（3-4周）

- 用户体验打磨（编辑器响应、交互反馈）
- 完成单元测试、集成测试和 E2E 测试
- 配置 CI/CD 流程

### 长期目标（1-2个月）

- 部署到生产环境
- 搭建监控和日志系统
- 开发浏览器插件

## 团队角色

| 角色 | 职责 |
|------|------|
| 后端架构师 | 后端服务开发、架构设计、数据同步 |
| 前端架构师 | 前端应用开发、用户体验优化 |
| UI 设计师 | 界面设计、用户体验优化 |
| API 测试专家 | API 测试、集成测试、安全测试 |
| 性能专家 | 性能优化、数据库优化 |
| DevOps 架构师 | 部署与监控、CI/CD 流程 |

## 项目约束

### 技术约束

- 必须使用 TypeScript
- 必须遵循 ESLint 和 Prettier 规范
- 必须使用 pnpm 作为包管理器
- 必须使用 Turborepo 管理 Monorepo

### 时间约束

- 预计开发周期：2-3 个月
- 每周至少更新一次进度文档

### 资源约束

- 当前开发阶段，暂无专职团队
- 使用 GitHub 免费托管
- 优先使用开源工具和服务

## 成功标准

1. **功能完整性**: 所有核心功能正常工作
2. **性能指标**: 页面加载 < 2s，API 响应 < 200ms
3. **代码质量**: 通过 ESLint 和 Prettier 检查
4. **测试覆盖**: 单元测试覆盖率 > 80%
5. **用户体验**: 界面简洁、操作流畅、响应快速

## 风险评估

### 高风险

- R2: 数据同步冲突解决机制不完善（影响程度：高，可能性：中）
  - 缓解措施：已实现 5 种冲突解决策略，需充分测试

### 中风险

- R1: 后端 API 设计不合理（影响程度：高，可能性：中）
  - 缓解措施：提前设计 API 规范，前后端同步沟通
- R3: 前端性能优化不足（影响程度：中，可能性：中）
  - 缓解措施：采用懒加载、虚拟列表等优化技术
- R4: 数据库性能问题（影响程度：中，可能性：低）
  - 缓解措施：合理设计数据库索引，优化查询语句
- R5: 部署环境配置复杂（影响程度：中，可能性：低）
  - 缓解措施：提前准备部署脚本，进行充分的环境测试

## 项目联系人

- **项目仓库**: https://github.com/firerlAGI/webnote
- **问题反馈**: GitHub Issues

---

**文档版本**: 1.1  
**创建日期**: 2026-01-16  
**最后更新**: 2026-01-18  
**负责人**: 项目负责人
