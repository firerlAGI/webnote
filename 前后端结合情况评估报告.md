# å‰åç«¯ç»“åˆæƒ…å†µè¯„ä¼°æŠ¥å‘Š

## è¯„ä¼°æ¦‚è¿°

**è¯„ä¼°æ—¶é—´**: 2026å¹´1æœˆ13æ—¥
**è¯„ä¼°èŒƒå›´**: packages/backendã€packages/webã€packages/shared
**è¯„ä¼°ç›®çš„**: åˆ†æå‰åç«¯é›†æˆçŠ¶æ€ï¼Œè¯†åˆ«é—®é¢˜å¹¶æä¾›æ”¹è¿›å»ºè®®

---

## ä¸€ã€æ¶æ„è®¾è®¡è¯„ä¼°

### 1.1 æ•´ä½“æ¶æ„ âœ… ä¼˜ç§€

**ä¼˜ç‚¹**:
- é‡‡ç”¨äº†æ ‡å‡†çš„ Monorepo æ¶æ„ï¼Œä½¿ç”¨ pnpm workspace ç®¡ç†å¤šåŒ…ä¾èµ–
- æ¸…æ™°çš„åŒ…ç»“æ„åˆ’åˆ†ï¼š
  - `packages/shared`: å…±äº«ç±»å‹å’Œå·¥å…·
  - `packages/backend`: åç«¯ API æœåŠ¡
  - `packages/web`: å‰ç«¯ Web åº”ç”¨
- ä½¿ç”¨ TypeScript å®ç°å…¨æ ˆç±»å‹å®‰å…¨

**æ¶æ„ä¼˜åŠ¿**:
```typescript
packages/
â”œâ”€â”€ shared/          // å…±äº«ç±»å‹å®šä¹‰ï¼Œå‰åç«¯å…±ç”¨
â”‚   â”œâ”€â”€ types/       // User, Note, Folder, Review ç­‰æ¥å£
â”‚   â”œâ”€â”€ api/         // API ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ schemas/     // æ•°æ®éªŒè¯æ¨¡å¼
â”œâ”€â”€ backend/         // Fastify + Prisma
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ api/     // API è·¯ç”±
â”‚       â”œâ”€â”€ services/ // ä¸šåŠ¡é€»è¾‘
â”‚       â””â”€â”€ models/  // æ•°æ®æ¨¡å‹
â””â”€â”€ web/             // React + Vite
    â””â”€â”€ src/
        â”œâ”€â”€ api/     // API å®¢æˆ·ç«¯
        â”œâ”€â”€ pages/   // é¡µé¢ç»„ä»¶
        â””â”€â”€ components/ // UI ç»„ä»¶
```

---

## äºŒã€ç±»å‹ç³»ç»Ÿè¯„ä¼°

### 2.1 å…±äº«ç±»å‹å®šä¹‰ âœ… å®Œå–„

**å…±äº«ç±»å‹**ï¼ˆpackages/shared/types/index.tsï¼‰:

```typescript
// æ ¸å¿ƒå®ä½“ç±»å‹
export interface User {
  id: number
  username: string
  email: string
  created_at: string
  updated_at: string
}

export interface Note {
  id: number
  user_id: number
  title: string
  content: string
  folder_id?: number
  is_pinned: boolean
  last_accessed_at: string
  content_hash?: string
  created_at: string
  updated_at: string
  folder?: Folder
}

export interface Folder {
  id: number
  user_id: number
  name: string
  created_at: string
  updated_at: string
  notes?: Note[]
}

export interface Review {
  id: number
  user_id: number
  date: string
  content: string
  mood?: number
  achievements?: string[]
  improvements?: string[]
  plans?: string[]
  template_id?: number
  created_at: string
  updated_at: string
}

// ç»Ÿä¸€å“åº”æ ¼å¼
export interface ApiResponse<T = any> {
  success: boolean
  data: T
  message?: string
  code: number
}
```

**è¯„ä»·**:
- âœ… ç±»å‹å®šä¹‰å®Œæ•´ï¼Œæ¶µç›–æ‰€æœ‰æ ¸å¿ƒä¸šåŠ¡å®ä½“
- âœ… ç»Ÿä¸€çš„ API å“åº”æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å¤„ç†
- âœ… åŒ…å«è¿‡æ»¤å™¨å’Œç»Ÿè®¡ç›¸å…³çš„è¾…åŠ©ç±»å‹
- âœ… ç±»å‹å‘½åè§„èŒƒï¼Œä½¿ç”¨ snake_caseï¼ˆç¬¦åˆæ•°æ®åº“è§„èŒƒï¼‰

---

## ä¸‰ã€åç«¯ API è¯„ä¼°

### 3.1 API è®¾è®¡ âœ… ä¼˜ç§€

**æŠ€æœ¯æ ˆ**: Fastify + Prisma + PostgreSQL + JWT

**API è·¯ç”±å®Œæ•´åº¦**:

| æ¨¡å— | è·¯ç”± | å®ç°çŠ¶æ€ |
|------|------|----------|
| è®¤è¯ | `/auth/*` | âœ… å®Œæ•´ |
| ç”¨æˆ· | `/user/me` | âœ… å®Œæ•´ |
| ç¬”è®° | `/notes/*` | âœ… å®Œæ•´ |
| æ–‡ä»¶å¤¹ | `/folders/*` | âœ… å®Œæ•´ |
| å¤ç›˜ | `/reviews/*` | âœ… å®Œæ•´ |
| å¤‡ä»½ | `/backups/*` | âœ… å®Œæ•´ |
| ä¸Šä¼  | `/upload/image` | âœ… å®Œæ•´ |

**è®¤è¯ä¸æˆæƒ**:
```typescript
// JWT è®¤è¯ä¸­é—´ä»¶
const authenticate = async (request: FastifyRequest) => {
  try {
    await request.jwtVerify()
  } catch (error) {
    throw new Error('Unauthorized')
  }
}

// èµ„æºæ‰€æœ‰æƒéªŒè¯ä¸­é—´ä»¶
const authorizeResource = async (
  request: FastifyRequest, 
  resourceType: 'note' | 'folder' | 'review', 
  resourceId: number
) => {
  const userId = (request.user as UserPayload).id
  // éªŒè¯èµ„æºæ˜¯å¦å±äºå½“å‰ç”¨æˆ·
  // ...
}
```

**ä¼˜ç‚¹**:
- âœ… RESTful API è®¾è®¡è§„èŒƒ
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼
- âœ… å®Œå–„çš„è®¤è¯æˆæƒæœºåˆ¶
- âœ… èµ„æºæ‰€æœ‰æƒéªŒè¯ï¼Œé˜²æ­¢è¶Šæƒè®¿é—®
- âœ… æ”¯æŒ CRUDã€æ‰¹é‡æ“ä½œã€åˆ†é¡µæŸ¥è¯¢
- âœ… å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼Œæ”¯æŒæ–‡ä»¶éªŒè¯

**API ç¤ºä¾‹**:
```typescript
// è·å–ç¬”è®°åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ã€æ’åºã€åˆ†é¡µï¼‰
app.get('/notes', { preHandler: authenticate }, async (request, reply) => {
  const { 
    search, 
    folder_id, 
    is_pinned, 
    sort_by = 'updated_at', 
    sort_order = 'desc',
    page = 1,
    limit = 20
  } = request.query

  const where = {
    user_id: (request.user as UserPayload).id,
    ...(folder_id && { folder_id: parseInt(folder_id) }),
    ...(is_pinned !== undefined && { is_pinned: is_pinned === 'true' }),
    ...(search && {
      OR: [
        { title: { contains: search, mode: 'insensitive' } },
        { content: { contains: search, mode: 'insensitive' } }
      ]
    })
  }
  // ...
})
```

---

## å››ã€å‰ç«¯ API é›†æˆè¯„ä¼°

### 4.1 API å®¢æˆ·ç«¯ âœ… å®Œå–„

**æŠ€æœ¯æ ˆ**: Axios + React

**API å®¢æˆ·ç«¯é…ç½®**ï¼ˆpackages/web/src/api/index.tsï¼‰:

```typescript
import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';

const api = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// è¯·æ±‚æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨æ·»åŠ è®¤è¯ Token
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç† 401 é”™è¯¯
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.hash = '/login';
    }
    return Promise.reject(error);
  }
);
```

**API æ–¹æ³•å°è£…**:

```typescript
export const notesAPI = {
  create: (data) => api.post('/notes', data),
  getAll: (params) => api.get('/notes', { params }),
  getById: (id) => api.get(`/notes/${id}`),
  update: (id, data) => api.put(`/notes/${id}`, data),
  delete: (id) => api.delete(`/notes/${id}`),
  batchDelete: (ids) => api.post('/notes/batch-delete', { ids }),
  batchPin: (ids, is_pinned) => api.post('/notes/batch-pin', { ids, is_pinned }),
};

export const foldersAPI = { /* ... */ };
export const reviewsAPI = { /* ... */ };
export const backupAPI = { /* ... */ };
```

**ä¼˜ç‚¹**:
- âœ… ç»Ÿä¸€çš„ Axios å®ä¾‹é…ç½®
- âœ… è‡ªåŠ¨æ·»åŠ è®¤è¯ Token
- âœ… è‡ªåŠ¨å¤„ç† 401 æœªæˆæƒé”™è¯¯
- âœ… å®Œæ•´çš„ API æ–¹æ³•å°è£…
- âœ… ä¸åç«¯è·¯ç”±å®Œå…¨å¯¹åº”

---

## äº”ã€é¡µé¢å®ç°è¯„ä¼°

### 5.1 å½“å‰çŠ¶æ€ âš ï¸ é—®é¢˜å­˜åœ¨

**å‘ç°çš„ä¸¥é‡é—®é¢˜**:

#### é—®é¢˜ 1: ä½¿ç”¨ Mock æ•°æ®è€ŒéçœŸå® API è°ƒç”¨

**ç°çŠ¶**ï¼ˆpackages/web/src/pages/NotesPage.tsxï¼‰:
```typescript
import { MOCK_NOTES, MOCK_FOLDERS } from '../constants';

const NotesPage: React.FC = () => {
  const [notes, setNotes] = useState(MOCK_NOTES);  // âŒ ä½¿ç”¨ Mock æ•°æ®
  
  const handleSave = () => {
    setIsEditing(false);
    // Logic to sync would go here  // âŒ åªæœ‰æ³¨é‡Šï¼Œæ²¡æœ‰å®ç°
  };
};
```

**é—®é¢˜åˆ†æ**:
- å‰ç«¯é¡µé¢å®Œå…¨ä½¿ç”¨ Mock æ•°æ®ï¼Œæ²¡æœ‰è°ƒç”¨åç«¯ API
- ä¿å­˜æ“ä½œåªæœ‰æ³¨é‡Šå ä½ç¬¦ï¼Œæœªå®ç°çœŸå®çš„æ•°æ®åŒæ­¥
- æœç´¢ã€ç¼–è¾‘ã€åˆ é™¤ç­‰æ“ä½œéƒ½åªåœ¨æœ¬åœ°çŠ¶æ€ä¸­ï¼Œä¸ä¼šæŒä¹…åŒ–åˆ°åç«¯

**å½±å“**:
- âŒ å‰åç«¯å®é™…ä¸Šæ²¡æœ‰çœŸæ­£é›†æˆ
- âŒ ç”¨æˆ·æ•°æ®æ— æ³•ä¿å­˜
- âŒ æ— æ³•å®ç°å¤šè®¾å¤‡åŒæ­¥
- âŒ å¤‡ä»½åŠŸèƒ½æ— æ³•ä½¿ç”¨

#### é—®é¢˜ 2: ç±»å‹ä¸ä¸€è‡´

**é—®é¢˜**:
```typescript
// å‰ç«¯ç±»å‹ï¼ˆpackages/web/src/types.tsï¼‰
export interface Note {
  id: string;  // âŒ string ç±»å‹
  title: string;
  content: string;
  folderId?: string;  // âŒ camelCase å‘½å
  isPinned: boolean;  // âŒ camelCase å‘½å
  updatedAt: string;  // âŒ camelCase å‘½å
  tags: string[];  // âŒ å‰ç«¯ç‹¬æœ‰çš„å­—æ®µ
}

// åç«¯/å…±äº«ç±»å‹ï¼ˆpackages/shared/types/index.tsï¼‰
export interface Note {
  id: number;  // âœ… number ç±»å‹
  title: string;
  content: string;
  folder_id?: number;  // âœ… snake_case å‘½å
  is_pinned: boolean;  // âœ… snake_case å‘½å
  updated_at: string;  // âœ… snake_case å‘½å
  // æ²¡æœ‰ tags å­—æ®µ
}
```

**å½±å“**:
- âŒ ç±»å‹ä¸åŒ¹é…ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯
- âŒ æ— æ³•ä½¿ç”¨å…±äº«ç±»å‹
- âŒ å‰åç«¯æ•°æ®æ ¼å¼ä¸ä¸€è‡´

---

## å…­ã€é›†æˆé—®é¢˜æ€»ç»“

### 6.1 ä¸»è¦é—®é¢˜

| é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ | æè¿° |
|------|----------|------|
| å‰ç«¯æœªè¿æ¥ API | ğŸ”´ ä¸¥é‡ | é¡µé¢ä½¿ç”¨ Mock æ•°æ®ï¼Œæœªè°ƒç”¨åç«¯ API |
| ç±»å‹ä¸ä¸€è‡´ | ğŸ”´ ä¸¥é‡ | å‰ç«¯ç±»å‹ä¸åç«¯ç±»å‹ä¸åŒ¹é… |
| æ•°æ®ä¸åŒæ­¥ | ğŸ”´ ä¸¥é‡ | ç”¨æˆ·æ“ä½œä¸ä¼šæŒä¹…åŒ–åˆ°åç«¯ |
| è®¤è¯æµç¨‹æœªé›†æˆ | ğŸŸ¡ ä¸­ç­‰ | è®¤è¯åŠŸèƒ½å·²å®ç°ä½†æœªåœ¨å‰ç«¯ä½¿ç”¨ |
| é”™è¯¯å¤„ç†ç¼ºå¤± | ğŸŸ¡ ä¸­ç­‰ | å‰ç«¯ç¼ºå°‘ API é”™è¯¯å¤„ç† |

### 6.2 å·²å®ç°çš„éƒ¨åˆ†

- âœ… åç«¯ API å®Œæ•´å®ç°
- âœ… å‰ç«¯ API å®¢æˆ·ç«¯å®Œæ•´å°è£…
- âœ… å…±äº«ç±»å‹å®šä¹‰
- âœ… è®¤è¯æˆæƒæœºåˆ¶
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ ¼å¼

---

## ä¸ƒã€æ”¹è¿›å»ºè®®

### 7.1 ç´§æ€¥ä¿®å¤ï¼ˆP0 - å¿…é¡»ç«‹å³ä¿®å¤ï¼‰

#### 1. æ›¿æ¢ Mock æ•°æ®ä¸ºçœŸå® API è°ƒç”¨

**ä¿®æ”¹** packages/web/src/pages/NotesPage.tsx:

```typescript
import React, { useState, useEffect } from 'react';
import { notesAPI, foldersAPI } from '../api';  // âœ… å¼•å…¥ API
import { Note, Folder } from '../types';  // âœ… ä½¿ç”¨å‰ç«¯ç±»å‹ï¼ˆæˆ–æ”¹ä¸ºå…±äº«ç±»å‹ï¼‰
import { CyberCard, CyberButton, CyberBadge } from '../components/CyberUI';
import { Folder as FolderIcon, Search, Save, Plus, Trash2, Pin, Database } from 'lucide-react';

const NotesPage: React.FC = () => {
  const [selectedNoteId, setSelectedNoteId] = useState<number | null>(null);
  const [searchTerm, setSearchTerm] = useState('');
  const [isEditing, setIsEditing] = useState(false);
  const [notes, setNotes] = useState<Note[]>([]);
  const [folders, setFolders] = useState<Folder[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // âœ… åŠ è½½ç¬”è®°åˆ—è¡¨
  useEffect(() => {
    loadNotes();
    loadFolders();
  }, []);

  const loadNotes = async () => {
    try {
      setLoading(true);
      const response = await notesAPI.getAll();
      if (response.data.success) {
        const notesData = response.data.data.notes;
        setNotes(notesData);
        if (notesData.length > 0 && !selectedNoteId) {
          setSelectedNoteId(notesData[0].id);
        }
      }
    } catch (err) {
      setError('åŠ è½½ç¬”è®°å¤±è´¥');
      console.error('Failed to load notes:', err);
    } finally {
      setLoading(false);
    }
  };

  const loadFolders = async () => {
    try {
      const response = await foldersAPI.getAll();
      if (response.data.success) {
        setFolders(response.data.data);
      }
    } catch (err) {
      console.error('Failed to load folders:', err);
    }
  };

  // âœ… å®ç°ä¿å­˜åŠŸèƒ½
  const handleSave = async () => {
    if (!selectedNote) return;
    
    try {
      setLoading(true);
      await notesAPI.update(selectedNote.id, {
        title: selectedNote.title,
        content: selectedNote.content,
        is_pinned: selectedNote.isPinned,
        folder_id: selectedNote.folderId,
      });
      setIsEditing(false);
      await loadNotes();  // é‡æ–°åŠ è½½æ•°æ®
    } catch (err) {
      setError('ä¿å­˜å¤±è´¥');
      console.error('Failed to save note:', err);
    } finally {
      setLoading(false);
    }
  };

  // âœ… å®ç°åˆ é™¤åŠŸèƒ½
  const handleDelete = async (noteId: number) => {
    if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡ç¬”è®°å—ï¼Ÿ')) return;
    
    try {
      setLoading(true);
      await notesAPI.delete(noteId);
      setSelectedNoteId(null);
      await loadNotes();
    } catch (err) {
      setError('åˆ é™¤å¤±è´¥');
      console.error('Failed to delete note:', err);
    } finally {
      setLoading(false);
    }
  };

  // âœ… å®ç°åˆ›å»ºåŠŸèƒ½
  const handleCreate = async () => {
    try {
      setLoading(true);
      const response = await notesAPI.create({
        title: 'æ–°ç¬”è®°',
        content: '',
        is_pinned: false,
      });
      if (response.data.success) {
        await loadNotes();
        setSelectedNoteId(response.data.data.id);
        setIsEditing(true);
      }
    } catch (err) {
      setError('åˆ›å»ºå¤±è´¥');
      console.error('Failed to create note:', err);
    } finally {
      setLoading(false);
    }
  };

  const selectedNote = notes.find(n => n.id === selectedNoteId);

  if (loading && notes.length === 0) {
    return (
      <div className="flex items-center justify-center h-full">
        <div className="text-gray-500">åŠ è½½ä¸­...</div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="flex items-center justify-center h-full">
        <div className="text-red-500">{error}</div>
      </div>
    );
  }

  // ... å…¶ä½™ UI ä»£ç ä¿æŒä¸å˜
};
```

#### 2. ç»Ÿä¸€ç±»å‹å®šä¹‰

**é€‰é¡¹ A**: ä¿®æ”¹å‰ç«¯ç±»å‹ä»¥åŒ¹é…åç«¯

```typescript
// packages/web/src/types.ts
import type { Note as SharedNote, Folder as SharedFolder, Review as SharedReview } from 'shared/types';

// ç›´æ¥ä½¿ç”¨å…±äº«ç±»å‹
export type Note = SharedNote;
export type Folder = SharedFolder;
export type Review = SharedReview;
```

**é€‰é¡¹ B**: æ·»åŠ é€‚é…å±‚

```typescript
// packages/web/src/utils/adapters.ts
import { Note as BackendNote } from 'shared/types';

export interface Note {
  id: number;  // æ”¹ä¸º number
  title: string;
  content: string;
  folderId?: number;  // æ”¹ä¸º number
  isPinned: boolean;
  updatedAt: string;
  tags?: string[];
}

// åç«¯ -> å‰ç«¯é€‚é…å™¨
export const adaptNoteFromBackend = (backendNote: BackendNote): Note => ({
  id: backendNote.id,
  title: backendNote.title,
  content: backendNote.content,
  folderId: backendNote.folder_id,
  isPinned: backendNote.is_pinned,
  updatedAt: backendNote.updated_at,
  tags: [],  // å¯é€‰ï¼šä» content ä¸­è§£æ tags
});

// å‰ç«¯ -> åç«¯é€‚é…å™¨
export const adaptNoteToBackend = (frontendNote: Note) => ({
  title: frontendNote.title,
  content: frontendNote.content,
  folder_id: frontendNote.folderId,
  is_pinned: frontendNote.isPinned,
});
```

#### 3. é›†æˆè®¤è¯æµç¨‹

**ä¿®æ”¹** packages/web/src/App.tsx:

```typescript
import { useEffect, useState } from 'react';
import { authAPI, userAPI } from './api';
import { User } from './types';

function App() {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // æ£€æŸ¥æœ¬åœ°å­˜å‚¨çš„ token
    const token = localStorage.getItem('token');
    if (token) {
      // éªŒè¯ token å¹¶è·å–ç”¨æˆ·ä¿¡æ¯
      userAPI.getMe()
        .then(response => {
          if (response.data.success) {
            setUser(response.data.data);
          } else {
            localStorage.removeItem('token');
          }
        })
        .catch(() => {
          localStorage.removeItem('token');
        })
        .finally(() => setLoading(false));
    } else {
      setLoading(false);
    }
  }, []);

  const handleLogin = async (email: string, password: string) => {
    const response = await authAPI.login(email, password);
    if (response.data.success) {
      const { user, token } = response.data.data;
      localStorage.setItem('token', token);
      localStorage.setItem('user', JSON.stringify(user));
      setUser(user);
    }
    return response;
  };

  const handleLogout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    setUser(null);
  };

  if (loading) {
    return <div>Loading...</div>;
  }

  return (
    <>
      {!user ? (
        <AuthPage onLogin={handleLogin} />
      ) : (
        <MainApp user={user} onLogout={handleLogout} />
      )}
    </>
  );
}

export default App;
```

### 7.2 ä¸­æœŸæ”¹è¿›ï¼ˆP1 - 1-2 å‘¨å†…å®Œæˆï¼‰

1. **æ·»åŠ åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†**
   - ä¸ºæ‰€æœ‰ API è°ƒç”¨æ·»åŠ  loading çŠ¶æ€
   - æ·»åŠ ç»Ÿä¸€çš„é”™è¯¯æç¤ºç»„ä»¶
   - å®ç°é‡è¯•æœºåˆ¶

2. **å®ç°å®æ—¶åŒæ­¥**
   - ä½¿ç”¨ WebSocket æˆ–è½®è¯¢å®ç°æ•°æ®å®æ—¶æ›´æ–°
   - æ˜¾ç¤ºåŒæ­¥çŠ¶æ€æŒ‡ç¤ºå™¨
   - å¤„ç†å†²çªè§£å†³

3. **ä¼˜åŒ–æ€§èƒ½**
   - å®ç°æ•°æ®ç¼“å­˜
   - æ·»åŠ è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§é‡æ•°æ®æ—¶ï¼‰
   - ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½

### 7.3 é•¿æœŸä¼˜åŒ–ï¼ˆP2 - 1 ä¸ªæœˆå†…å®Œæˆï¼‰

1. **ç¦»çº¿æ”¯æŒ**
   - ä½¿ç”¨ Service Worker å®ç°ç¦»çº¿ç¼“å­˜
   - å®ç°ç¦»çº¿ç¼–è¾‘å’ŒåŒæ­¥é˜Ÿåˆ—

2. **å¢å¼ºåŠŸèƒ½**
   - å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
   - æ·»åŠ é™„ä»¶ä¸Šä¼ 
   - å®ç°å…¨æ–‡æœç´¢

---

## å…«ã€é›†æˆè·¯çº¿å›¾

### é˜¶æ®µ 1: åŸºç¡€é›†æˆï¼ˆ1-2 å¤©ï¼‰

- [ ] æ›¿æ¢æ‰€æœ‰ Mock æ•°æ®ä¸ºçœŸå® API è°ƒç”¨
- [ ] ç»Ÿä¸€å‰åç«¯ç±»å‹å®šä¹‰
- [ ] å®ç°åŸºç¡€çš„ CRUD åŠŸèƒ½
- [ ] é›†æˆè®¤è¯æµç¨‹

### é˜¶æ®µ 2: å®Œå–„åŠŸèƒ½ï¼ˆ3-5 å¤©ï¼‰

- [ ] æ·»åŠ åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†
- [ ] å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- [ ] å®ç°æ‰¹é‡æ“ä½œ
- [ ] æ·»åŠ åˆ†é¡µå’Œæœç´¢

### é˜¶æ®µ 3: ä¼˜åŒ–ä½“éªŒï¼ˆ1 å‘¨ï¼‰

- [ ] å®ç°å®æ—¶åŒæ­¥
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜
- [ ] ä¼˜åŒ–æ€§èƒ½
- [ ] æ·»åŠ ç¦»çº¿æ”¯æŒ

---

## ä¹ã€æ€»ç»“

### å½“å‰çŠ¶æ€

**å‰åç«¯ç»“åˆç¨‹åº¦**: **20%** ğŸ”´

- **åç«¯å®Œæˆåº¦**: 95% âœ…
- **API å®¢æˆ·ç«¯å®Œæˆåº¦**: 90% âœ…
- **å‰ç«¯é›†æˆå®Œæˆåº¦**: 5% âŒ

### ä¸»è¦é—®é¢˜

1. å‰ç«¯é¡µé¢å®Œå…¨ä½¿ç”¨ Mock æ•°æ®ï¼Œæœªè¿æ¥åç«¯ API
2. ç±»å‹å®šä¹‰ä¸ä¸€è‡´
3. ç¼ºå°‘è®¤è¯æµç¨‹é›†æˆ
4. ç¼ºå°‘é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€

### æ ¸å¿ƒå»ºè®®

**ç«‹å³è¡ŒåŠ¨é¡¹**:
1. åœæ­¢ä½¿ç”¨ Mock æ•°æ®ï¼Œè¿æ¥çœŸå® API
2. ç»Ÿä¸€ç±»å‹å®šä¹‰ï¼Œä½¿ç”¨å…±äº«ç±»å‹
3. å®ç°åŸºç¡€çš„ CRUD æ“ä½œ
4. é›†æˆè®¤è¯æµç¨‹

**é¢„è®¡å·¥ä½œé‡**: 2-3 å¤©å®ŒæˆåŸºç¡€é›†æˆ

---

## åã€é™„å½•

### A. æŠ€æœ¯æ ˆå¯¹æ¯”

| å±‚çº§ | æŠ€æœ¯é€‰å‹ | è¯„ä»· |
|------|---------|------|
| åç«¯æ¡†æ¶ | Fastify | âœ… é«˜æ€§èƒ½ï¼ŒTypeScript æ”¯æŒå¥½ |
| æ•°æ®åº“ | PostgreSQL + Prisma | âœ… æˆç†Ÿç¨³å®šï¼ŒORM åŠŸèƒ½å®Œå–„ |
| è®¤è¯ | JWT | âœ… æ— çŠ¶æ€ï¼Œæ˜“äºæ‰©å±• |
| å‰ç«¯æ¡†æ¶ | React | âœ… ç”Ÿæ€å®Œå–„ï¼Œç»„ä»¶åŒ– |
| HTTP å®¢æˆ·ç«¯ | Axios | âœ… åŠŸèƒ½å¼ºå¤§ï¼Œæ‹¦æˆªå™¨æ”¯æŒå¥½ |
| æ„å»ºå·¥å…· | Vite | âœ… å¼€å‘ä½“éªŒå¥½ï¼Œæ„å»ºé€Ÿåº¦å¿« |

### B. å‚è€ƒèµ„æ–™

- Fastify å®˜æ–¹æ–‡æ¡£: https://www.fastify.io/
- Prisma å®˜æ–¹æ–‡æ¡£: https://www.prisma.io/
- React å®˜æ–¹æ–‡æ¡£: https://react.dev/
- Axios å®˜æ–¹æ–‡æ¡£: https://axios-http.com/

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026å¹´1æœˆ13æ—¥ 15:56
**è¯„ä¼°è€…**: Cline AI Assistant
**ç‰ˆæœ¬**: v1.0
